{% extends 'base.html' %}
{% block title %}ArtykuÅ‚y{% endblock %}
{% block content %}
<h1>Lista artykuÅ‚Ã³w</h1>

<div class="center-button">
    <a href="{% url 'index' %}">â† PowrÃ³t do listy ToDo</a>
</div>

{% if user.is_authenticated %}
<div class="center-button">
    <a href="{% url 'create-article' %}" class="btn btn-success">+ Dodaj rÄ™cznie</a>
    <a href="{% url 'create-article-from-url' %}" class="btn btn-primary">ğŸŒ Dodaj z linka</a>
</div>
{% endif %}

{% for article in articles %}
<div class="article-card">
    <!-- TytuÅ‚ -->
    <h2>{{ article.title|default:"(brak tytuÅ‚u)" }}</h2>

    <!-- Å¹rÃ³dÅ‚o -->
    {% if article.url %}
        <p><b>Å¹rÃ³dÅ‚o:</b> <a href="{{ article.url }}" target="_blank">{{ article.url }}</a></p>
    {% endif %}

    <!-- Przerwa -->
    <div class="spacer"></div>

    <!-- Status -->
    {% if article.status == 'in_progress' %}
        <span style="color: orange;">â³ Trwa pobieranie artykuÅ‚u...</span>
    {% elif article.status == 'success' %}
        <span style="color: green;">âœ… Gotowe</span>
    {% elif article.status == 'error' %}
        <span style="color: red;">âŒ BÅ‚Ä…d</span>
    {% endif %}

    <!-- TreÅ›Ä‡ -->
    <div class="article-content">
        <p>
            {{ article.content|truncatewords:50|linebreaksbr }}
        </p>
        <a href="{% url 'article-detail' article.pk %}">PokaÅ¼ wiÄ™cej â†’</a>          
    </div>

    <!-- Przerwa -->
    <div class="spacer"></div>

    <!-- Informacje -->
    <div class="article-meta">
        <small><strong>Autor:</strong> {{ article.author.username }}</small><br>
        <small><strong>Data utworzenia:</strong> {{ article.created_at }}</small><br>
    </div>

    <!-- Przerwa -->
    <div class="spacer"></div>

    <!-- Przyciski -->
    {% if user.is_authenticated and article.author == user %}
    <div class="article-buttons">
        <a href="{% url 'edit-article' article.id %}">âœï¸ Edytuj</a>
        <a href="{% url 'delete-article' article.id %}">ğŸ—‘ï¸ UsuÅ„</a>
    </div>
    {% endif %}
</div>
{% empty %}
<p>Brak artykuÅ‚Ã³w.</p>
{% endfor %}
{% endblock %}