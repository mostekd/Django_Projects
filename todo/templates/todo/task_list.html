{% extends 'todo/base.html' %}
{% block content %}
<h1>Twoje zadania</h1>
<form method="GET" class="filter-bar">
    <input type="text" name="search" placeholder="Szukaj..." value="{{ search }}">
    <select name="filter">
        <option value="all" {% if filter == 'all' %}selected{% endif %}>Wszystkie</option>
        <option value="done" {% if filter == 'done' %}selected{% endif %}>Ukończone</option>
        <option value="not_done" {% if filter == 'not_done' %}selected{% endif %}>Nieukończone</option>
    </select>
    <select name="sort">
        <option value="asc" {% if sort == 'asc' %}selected{% endif %}>Rosnąco</option>
        <option value="desc" {% if sort == 'desc' %}selected{% endif %}>Malejąco</option>
    </select>
    <button type="submit" class="btn">Filtruj</button>
</form>
<a class="btn" href="{% url 'task_create' %}">+ Nowe Zadanie</a>
<a class="btn" href="{% url 'logout' %}">Wyloguj</a>
<ul class="task-list">
    {% for task in tasks %}
    <li class="task-item {% if task.complete %}done{% endif %}">
        <span>{{ task.title }}</span>
        <div>
            <a href="{% url 'task_toggle' task.id %}">✔️</a>
            <a href="{% url 'task_edit' task.id %}">✏️</a>
            <a href="{% url 'task_delete' task.id %}">❌</a>
        </div>
    </li>
    {% empty %}
    <li>Brak zadań.</li>
    {% endfor %}
</ul>
{% endblock %}
